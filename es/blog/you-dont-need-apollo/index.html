<!doctype html> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <link href=apple-icon-57x57.png rel=apple-touch-icon sizes=57x57> <link href=apple-icon-60x60.png rel=apple-touch-icon sizes=60x60> <link href=apple-icon-72x72.png rel=apple-touch-icon sizes=72x72> <link href=apple-icon-76x76.png rel=apple-touch-icon sizes=76x76> <link href=apple-icon-114x114.png rel=apple-touch-icon sizes=114x114> <link href=apple-icon-120x120.png rel=apple-touch-icon sizes=120x120> <link href=apple-icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=apple-icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=apple-icon-180x180.png rel=apple-touch-icon sizes=180x180> <link href=android-icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=favicon-32x32.png rel=icon sizes=32x32 type=image/png> <link href=favicon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=favicon-16x16.png rel=icon sizes=16x16 type=image/png> <link href=manifest.json rel=manifest> <meta content=#E34495 name=msapplication-TileColor> <meta content=ms-icon-144x144.png name=msapplication-TileImage> <meta content=#E34495 name=theme-color> <base href=/ > <link href="https://fonts.googleapis.com/css2?family=Overpass:wght@400;600;700&family=Roboto+Slab:wght@400;600;700&display=swap" rel=stylesheet> <link href=dracula.css rel=stylesheet> <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.ico rel=icon type=image/png> <script src=https://unpkg.com/yt-vid@0.0.5/dist/yt-vid/yt-vid.esm.js type=module></script> <script src=https://unpkg.com/yt-vid@0.0.5/dist/yt-vid/yt-vid.js nomodule=""></script> <link href=client/main.1857510773.css rel=stylesheet><link href=client/client.a9a415dd.css rel=stylesheet><link href=client/Commento.3cba96ec.css rel=stylesheet><link href=client/Blog.25e2fa42.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>En realidad no necesitas Apollo | Pablo Berganza</title><meta content="Pablo Berganza" name=author><meta content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo" name=description><meta content="En realidad no necesitas Apollo | Pablo Berganza" itemprop=name><meta content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo" itemprop=description><meta content=https://pablo.berganza.dev/img/blog-pics/2020-06-08-800.jpg name=twitter:image> <meta content=https://pablo.berganza.dev/img/blog-pics/2020-06-08-800.jpg property=og:image> <meta content=https://pablo.berganza.dev/img/blog-pics/2020-06-08-800.jpg itemprop=image> <meta content=summary_large_image name=twitter:card><meta content="En realidad no necesitas Apollo | Pablo Berganza" name=twitter:title><meta content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo" name=twitter:description><meta content=Pablo_ABC name=twitter:site><meta content=Pablo_ABC name=twitter:creator><meta content="En realidad no necesitas Apollo | Pablo Berganza" property=og:title><meta content=https://pablo.berganza.dev/es/blog/you-dont-need-apollo property=og:url><meta content="Pablo Berganza" property=og:site_name><meta content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo" property=og:description><meta content=es property=og:locale><meta content=1441268341 property=fb:admins><meta content=2097322913669232 property=fb:app_id><meta content=article property=og:type><meta content="Pablo Berganza" property=article:author> <meta content=2020-06-08 property=article:published_time> <meta name=twitter:label1 value="Tiempo de lectura"> <meta name=twitter:label2 value=Autor> <meta name=twitter:data1 value="6 min"> <meta name=twitter:data2 value="Pablo Berganza"><script type=application/ld+json>{
        "@context": "https://schema.org/",
        "@type": "BlogPosting",
        "isFamilyFriendly": "true",
        "author": {
          "@type": "Person",
          "name": "Pablo Berganza",
          "url": "https://pablo.berganza.dev"
        }
      } </script><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <header class=svelte-omxq6j><nav class=svelte-199w0oq><div class="svelte-199w0oq left-nav"><a href=./es/ class=svelte-199w0oq id=logo><span class=svelte-199w0oq>Pablo</span> <span class=svelte-199w0oq>Berganza</span></a> <div class="svelte-199w0oq nav-items"><a href=es/blog rel=prefetch class="svelte-199w0oq nav-item" id=blog-nav><span class=svelte-199w0oq>Blog</span> </a><a href=es/contact class="svelte-199w0oq nav-item" id=contact-nav><span class=svelte-199w0oq>Contáctame</span> </a></div></div> <div class="svelte-199w0oq right-nav"><a href=blog/you-dont-need-apollo rel=prefetch>en</a> <a href=https://github.com/pablo-abc rel="noopener noreferrer" target=_blank title=GitHub aria-label=GitHub class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" fill=currentColor></path></svg> </a> <a href=https://www.instagram.com/berganzapablo/ rel="noopener noreferrer" target=_blank title=Instagram aria-label=Instagram class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z" fill=currentColor></path></svg> </a> <a href=https://www.linkedin.com/in/PabloABC rel="noopener noreferrer" target=_blank title=LinkedIn aria-label=LinkedIn class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" fill=currentColor></path></svg> </a> <a href=https://twitter.com/Pablo_ABC rel="noopener noreferrer" target=_blank title=Twitter aria-label=Twitter class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" fill=currentColor></path></svg> </a></div> </nav></header> <main class=svelte-omxq6j> <article class=main itemscope itemtype=https://schema.org/BlogPosting><header class="svelte-1yyein title"><h1 class=svelte-1yyein><span class=svelte-1yyein itemprop=headline>En realidad no necesitas Apollo</span></h1> <h4 class="svelte-1yyein description"><span class=svelte-1yyein itemprop=alternativeHeadline>¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo</span></h4></header> <div><img alt="Breslavia, Polonia" class="banner svelte-tfh79e" itemprop=image src=img/blog-pics/2020-06-08-placeholder.jpg title="Breslavia, Polonia"> <div class="svelte-1yyein ttr-created"><span class="svelte-1yyein ttr"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z" fill=currentColor></path></svg> 6 min </span> <span class="svelte-1yyein created"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z" fill=currentColor></path></svg> <span class=svelte-1yyein itemprop=dateCreated>2020-06-08</span></span></div> <div class="svelte-1yyein tag-links">Tags: <a href=es/blog/tags/javascript class="svelte-1yyein tag-link">javascript </a><a href=es/blog/tags/graphql class="svelte-1yyein tag-link">graphql </a><a href=es/blog/tags/react class="svelte-1yyein tag-link">react </a><a href=es/blog/tags/programacion class="svelte-1yyein tag-link">programacion </a></div> <section class="svelte-1yyein content"><p>La primera vez que probé <a href=https://graphql.org rel="noopener noreferrer" target=_blank title=GraphQL> GraphQL </a> fue cuando todavía me hubiera considerado solamente un desarrollador back-end. Hace aproximadamente dos años me di la oportunidad de aprenderlo gracias al soporte de <a href=https://nestjs.com rel="noopener noreferrer" target=_blank title=NestJS> NestJS </a> y me enamoré completamente de él. El hecho de que la documentación se genere automáticamente, y que puedes pedir exactamente la información que necesites con una sola petición, me hizo sentir que trabajar con un API GraphQL como un desarrollador front-end sería muy placentero.</p> <h2 id=el-camino-hacia-graphql-en-el-front-end>El camino hacia GraphQL en el front-end</h2> <p>Me había motivado para crear algo del lado del front-end con este nuevo conocimiento. Para ese entonces, todavía estaba acostumbrándome al desarrollo en front-end con <a href=https://reactjs.org rel="noopener noreferrer" target=_blank title=React> React </a> (la última vez que había hecho algo en front-end, jQuery seguía siendo la herramienta a utilizar). Naturalmente, busqué <code>graphql react</code> en DuckDuckGo y lo primero que encontré fue <a href=https://www.apollographql.com rel="noopener noreferrer" target=_blank title=Apollo> Apollo </a>. Apollo es una herramienta increíble que ofrece muchas utilidades; incluso puedes manejar el estado de tu aplicación con ella. Pero, esta herramienta si se sentía algo <em>pesada</em> para alguien que solo está intentando aprender como usar GraphQL, o para cualquier proyecto pequeño en ese sentido. Admito que fui algo ingenuo, pero en ese momento si pensé: <em>wow, GraphQL solamente sería útil para proyectos muy grandes</em>. Aun así continué realizando mis experimentos con Apollo. Como era de esperar, pasé gran parte del tiempo leyendo como usar Apollo; algo que no es malo en sí, pero si se sentiría abrumador para alguien aprendiendo.</p> <p>En algún momento el año pasado encontré <a href=https://formidable.com/open-source/urql/ rel="noopener noreferrer" target=_blank title=urql> urql </a>, que busca ser una alternativa más liviana a Apollo, y fue increíble. Un API más simple, y menos utilidades, significaba que requería menos tiempo leyendo la documentación y más tiempo construyendo lo que necesitaba. Pero siempre se sentía algo pesado para mis casos de uso. Aun así, en estos momentos escogería urql sobre Apollo para un proyecto serio, ya que si siento que Apollo intenta hacer demasiado para mi gusto.</p> <p>Actualmente no he trabajado profesionalmente en ningún proyecto que utilice GraphQL, pero he seguido utilizándolo para mis proyectos personales. Sin embargo, durante ese tiempo no podía evitar seguir sintiendo que el punto de entrada era algo alto para cualquier desarrollador front-end que quisiera aprenderlo. Si buscas en DuckDuckGo (o Google) <code>react graphql</code>, tus primeros resultados serán Apollo y <a href=https://www.howtographql.com rel="noopener noreferrer" target=_blank title=howtographql.com> howtographql.com </a>. Si ingresas a este último, verás que Apollo y urql son listados como la <em>opción para principiantes</em>. Siento que esto es un punto de entrada artificialmente alto para un principiante.</p> <h2 id=¿cuál-es-la-alternativa>¿Cuál es la alternativa?</h2> <p>¿Cuáles son los requisitos mínimos para hacer una petición a un API GraphQL desde el navegador? Pues... solamente el API <a href=https://developer.mozilla.org/es/docs/Web/API/Fetch_API rel="noopener noreferrer" target=_blank title=fetch> fetch </a>. Después de todo, solo necesitas hacer una petición HTTP POST al endpoint de GraphQL. Esta solo necesita contener una query/mutación en el <code>body</code> como una cadena de texto; opcionalmente las variables, si son necesarias para la query. No <em>necesita</em> ser una petición POST, y puede tener un tipo MIME <code>application/graphql</code>, pero una petición POST con un tipo MIME <code>application/json</code> debería funcionar siempre para mantenerlo sencillo.</p> <pre class="hljs javascript"><code>fetch(<span class=hljs-string>`<span class=hljs-subst>${API}</span>/graphql`</span>, {
  <span class=hljs-attr>method</span>: <span class=hljs-string>'post'</span>,
  <span class=hljs-attr>headers</span>: { <span class=hljs-string>'content-type'</span>: <span class=hljs-string>'application/json'</span> },
  <span class=hljs-attr>body</span>: <span class=hljs-built_in>JSON</span>.stringify({
    <span class=hljs-attr>query</span>: <span class=hljs-string>`...`</span>,
    <span class=hljs-attr>variables</span>: {
      ...
    },
  })
}).then(<span class=hljs-function><span class=hljs-params>r</span> =></span> r.json())</code></pre><p>Puedes transformar esto en una función más reutilizable así:</p> <pre class="hljs javascript"><code><span class=hljs-keyword>async</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>gqlFetcher</span>(<span class=hljs-params>query, variables</span>) </span>{
  <span class=hljs-keyword>const</span> { data, errors } = <span class=hljs-keyword>await</span> fetch(<span class=hljs-string>`<span class=hljs-subst>${API}</span>/graphql`</span>, {
    <span class=hljs-attr>method</span>: <span class=hljs-string>'post'</span>,
    <span class=hljs-attr>headers</span>: { <span class=hljs-string>'content-type'</span>: <span class=hljs-string>'application/json'</span> },
    <span class=hljs-attr>body</span>: <span class=hljs-built_in>JSON</span>.stringify({ query, variables }),
  }).then(<span class=hljs-function><span class=hljs-params>r</span> =></span> r.json())
  <span class=hljs-keyword>if</span> (errors) <span class=hljs-keyword>throw</span> errors
  <span class=hljs-keyword>return</span> data
}</code></pre><p>Un servidor GraphQL responde con 200 aunque contenga errores. Generalmente solo debes revisar si la respuesta contiene una propiedad <code>errors</code>. Esta sigue siendo una manera optimista de manejar la petición, ya que no se está tomando en cuenta otros tipos de errores que sí pueden retornar 4xx o 5xx. Para el objetivo de esta publicación lo dejaremos así.</p> <h2 id=mejor-ergonomía>Mejor ergonomía</h2> <p>Este método hace que pierdas la cómoda interfaz que Apollo y urql proveen. Siempre puedes crear tus propios hooks que provean una interfaz más amigable, sin embargo, he preferido usar el hook <a href=https://github.com/vercel/swr rel="noopener noreferrer" target=_blank title=swr> swr </a> de Vercel. Este hook funciona para cualquier petición de datos remotos. Su funcionamiento consiste en retornar primero la data del cache, luego hace la petición, y finalmente retorna la nueva información recibida. Provee una interfaz amigable para manejar la información dentro de tus componentes mientras mantienen tu UI, como ellos mismos lo describen, rápido y reactivo. La función <code>gqlFetcher</code> que hicimos antes ya es compatible con el hook <code>useSWR</code>, no se requiere trabajo adicional para hacerlo funcionar.</p> <pre class="hljs javascript"><code><span class=hljs-keyword>import</span> useSWR <span class=hljs-keyword>from</span> <span class=hljs-string>'swr'</span>

<span class=hljs-keyword>const</span> gqlQuery = <span class=hljs-string>`...`</span>

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>Component</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-comment>// gqlFetcher es la misma función que se definió antes</span>
  <span class=hljs-keyword>const</span> { data, error } = useSWR(gqlQuery, gqlFetcher)

  <span class=hljs-keyword>if</span> (error) <span class=hljs-keyword>return</span> <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>{/*...*/}<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span></span> <span class=hljs-comment>// JSX con la info del error</span>
  <span class=hljs-keyword>if</span> (!data) <span class=hljs-keyword>return</span> <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>Loading...<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span></span> <span class=hljs-comment>// Componente de "Loading"</span>
  <span class=hljs-keyword>return</span> <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>{/*...*/}<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span></span> <span class=hljs-comment>// JSX con la info recibida</span>
}</code></pre><p>Para pasar múltiples argumentos a la función <code>fetcher</code>, <code>useSWR</code> permite pasar un arreglo como primer argumento.</p> <pre class="hljs javascript"><code><span class=hljs-keyword>const</span> gqlQuery = <span class=hljs-string>`...`</span>
<span class=hljs-keyword>const</span> gqlVariables = {
  <span class=hljs-comment>// ...</span>
}

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>Component</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> { data, error } = useSWR([gqlQuery, gqlVariables], gqlFetcher)
  <span class=hljs-comment>// ...</span>
}</code></pre><blockquote> <p><code>useSWR</code> utiliza el primer argumento como una <code>llave</code> que sirve para identificar la petición. Si es un arreglo, <code>swr</code> compara superficialmente cada elemento y, si alguno de ellos ha cambiado, revalida la petición.</p> </blockquote> <h2 id=herramientas-existentes>Herramientas existentes</h2> <p>Si no quieres crear tu propio wrapper sobre <code>fetch</code>, puedes usar <a href=https://github.com/prisma-labs/graphql-request rel="noopener noreferrer" target=_blank title=graphql-request> graphql-request </a>. Es un wrapper sobre el API <code>fetch</code> para realizar peticiones a un servidor GraphQL que no requiere de mucho trabajo para empezar a utilizarlo. Ya tiene un buen manejo de errores y es isomórfica por defecto (algo que tal vez no le guste a algunas personas). La página de GitHub de <code>swr</code> ya muestra un ejemplo con esta herramienta.</p> <pre class="hljs javascript"><code><span class=hljs-keyword>import</span> { request } <span class=hljs-keyword>from</span> <span class=hljs-string>'graphql-request'</span>

<span class=hljs-keyword>const</span> API = <span class=hljs-string>'https://api.graph.cool/simple/v1/movies'</span>
<span class=hljs-keyword>const</span> fetcher = <span class=hljs-function><span class=hljs-params>query</span> =></span> request(API, query)

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>App</span> (<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> { data, error } = useSWR(
    <span class=hljs-string>`{
      Movie(title: "Inception") {
        releaseDate
        actors {
          name
        }
      }
    }`</span>,
    fetcher
  )
  <span class=hljs-comment>// ...</span>
}</code></pre><h2 id=conclusión>Conclusión</h2> <p>Siento que hay un punto de entrada artificialmente alto para desarrolladores front-end que quieren entrar al mundo de GraphQL. El hecho de que Apollo y urql sean mostrados como opciones para <em>principiantes</em> puede hacer sentir que estas herramientas son <em>necesarias</em> para trabajar con un API GraphQL. Esto no es cierto. <strong>Sí</strong> puedes construir una aplicación completa utilizando solamente <code>fetch</code>, tal vez agregando otras pequeñas librerías para utilidades extras. No puedo imaginar algún proyecto hobby que pueda necesitar todas las utilidades proveídas por estas grandes librerías. Clarificando: no estoy diciendo que no debas usar estas librerías si quieres, sino que no debes sentir que estás librerías son <em>necesarias</em> para construir lo que quieres.</p> </section> <footer class=svelte-1yyein><ul class="svelte-12fd6e6 share-buttons"><li class=svelte-12fd6e6>Compártelo:</li> <li class=svelte-12fd6e6><a href="https://www.facebook.com/sharer/sharer.php?u=https://pablo.berganza.dev/you-dont-need-apollo&quote=¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo" rel="noopener noreferrer" target=_blank title="Share on Facebook"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Share on Facebook</span> </a></li> <li class=svelte-12fd6e6><a href="https://twitter.com/intent/tweet?source=https://pablo.berganza.dev/you-dont-need-apollo&text=¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo:%20https://pablo.berganza.dev/you-dont-need-apollo&via=Pablo_ABC" rel="noopener noreferrer" target=_blank title=Tweet><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Tweet</span> </a></li> <li class=svelte-12fd6e6><a href="https://getpocket.com/save?url=https://pablo.berganza.dev/you-dont-need-apollo&title=En realidad no necesitas Apollo" rel="noopener noreferrer" target=_blank title="Add to Pocket"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Add to Pocket</span> </a></li> <li class=svelte-12fd6e6><a href="http://www.reddit.com/submit?url=https://pablo.berganza.dev/you-dont-need-apollo&title=En realidad no necesitas Apollo" rel="noopener noreferrer" target=_blank title="Submit to Reddit"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M283.2 345.5c2.7 2.7 2.7 6.8 0 9.2-24.5 24.5-93.8 24.6-118.4 0-2.7-2.4-2.7-6.5 0-9.2 2.4-2.4 6.5-2.4 8.9 0 18.7 19.2 81 19.6 100.5 0 2.4-2.3 6.6-2.3 9 0zm-91.3-53.8c0-14.9-11.9-26.8-26.5-26.8-14.9 0-26.8 11.9-26.8 26.8 0 14.6 11.9 26.5 26.8 26.5 14.6 0 26.5-11.9 26.5-26.5zm90.7-26.8c-14.6 0-26.5 11.9-26.5 26.8 0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-11.9 26.8-26.5 0-14.9-11.9-26.8-26.8-26.8zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-99.7 140.6c-10.1 0-19 4.2-25.6 10.7-24.1-16.7-56.5-27.4-92.5-28.6l18.7-84.2 59.5 13.4c0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-12.2 26.8-26.8 0-14.6-11.9-26.8-26.8-26.8-10.4 0-19.3 6.2-23.8 14.9l-65.7-14.6c-3.3-.9-6.5 1.5-7.4 4.8l-20.5 92.8c-35.7 1.5-67.8 12.2-91.9 28.9-6.5-6.8-15.8-11-25.9-11-37.5 0-49.8 50.4-15.5 67.5-1.2 5.4-1.8 11-1.8 16.7 0 56.5 63.7 102.3 141.9 102.3 78.5 0 142.2-45.8 142.2-102.3 0-5.7-.6-11.6-2.1-17 33.6-17.2 21.2-67.2-16.1-67.2z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Submit to Reddit</span> </a></li> <li class=svelte-12fd6e6><a href="http://www.linkedin.com/shareArticle?mini=true&url=https://pablo.berganza.dev/you-dont-need-apollo&title=En realidad no necesitas Apollo&summary=¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo&source=https://pablo.berganza.dev/you-dont-need-apollo" rel="noopener noreferrer" target=_blank title="Share on LinkedIn"><svg aria-hidden=true class="fa-svelte svelte-1gtc9ka" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Share on LinkedIn</span> </a></li> </ul> <label class="svelte-d1ahnf visuallyhidden" for=commento-textarea-root>Comentario</label> <div class=svelte-d1ahnf id=commento></div> </footer></div> </article> </main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,null,{blog:{attributes:{title:"En realidad no necesitas Apollo",description:"¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo",banner:"img\u002Fblog-pics\u002F2020-06-08.jpg",bannertitle:"Breslavia, Polonia",tags:["javascript","graphql","react","programacion"],created:"2020-06-08"},body:"La primera vez que probé [GraphQL](https:\u002F\u002Fgraphql.org) fue cuando todavía me hubiera considerado solamente un desarrollador back-end. Hace aproximadamente dos años me di la oportunidad de aprenderlo gracias al soporte de [NestJS](https:\u002F\u002Fnestjs.com) y me enamoré completamente de él. El hecho de que la documentación se genere automáticamente, y que puedes pedir exactamente la información que necesites con una sola petición, me hizo sentir que trabajar con un API GraphQL como un desarrollador front-end sería muy placentero.\n\n## El camino hacia GraphQL en el front-end\n\nMe había motivado para crear algo del lado del front-end con este nuevo conocimiento. Para ese entonces, todavía estaba acostumbrándome al desarrollo en front-end con [React](https:\u002F\u002Freactjs.org) (la última vez que había hecho algo en front-end, jQuery seguía siendo la herramienta a utilizar). Naturalmente, busqué `graphql react` en DuckDuckGo y lo primero que encontré fue [Apollo](https:\u002F\u002Fwww.apollographql.com). Apollo es una herramienta increíble que ofrece muchas utilidades; incluso puedes manejar el estado de tu aplicación con ella. Pero, esta herramienta si se sentía algo _pesada_ para alguien que solo está intentando aprender como usar GraphQL, o para cualquier proyecto pequeño en ese sentido. Admito que fui algo ingenuo, pero en ese momento si pensé: _wow, GraphQL solamente sería útil para proyectos muy grandes_. Aun así continué realizando mis experimentos con Apollo. Como era de esperar, pasé gran parte del tiempo leyendo como usar Apollo; algo que no es malo en sí, pero si se sentiría abrumador para alguien aprendiendo.\n\nEn algún momento el año pasado encontré [urql](https:\u002F\u002Fformidable.com\u002Fopen-source\u002Furql\u002F), que busca ser una alternativa más liviana a Apollo, y fue increíble. Un API más simple, y menos utilidades, significaba que requería menos tiempo leyendo la documentación y más tiempo construyendo lo que necesitaba. Pero siempre se sentía algo pesado para mis casos de uso. Aun así, en estos momentos escogería urql sobre Apollo para un proyecto serio, ya que si siento que Apollo intenta hacer demasiado para mi gusto.\n\nActualmente no he trabajado profesionalmente en ningún proyecto que utilice GraphQL, pero he seguido utilizándolo para mis proyectos personales. Sin embargo, durante ese tiempo no podía evitar seguir sintiendo que el punto de entrada era algo alto para cualquier desarrollador front-end que quisiera aprenderlo. Si buscas en DuckDuckGo (o Google) `react graphql`, tus primeros resultados serán Apollo y [howtographql.com](https:\u002F\u002Fwww.howtographql.com). Si ingresas a este último, verás que Apollo y urql son listados como la _opción para principiantes_. Siento que esto es un punto de entrada artificialmente alto para un principiante.\n\n## ¿Cuál es la alternativa?\n\n¿Cuáles son los requisitos mínimos para hacer una petición a un API GraphQL desde el navegador? Pues... solamente el API [fetch](https:\u002F\u002Fdeveloper.mozilla.org\u002Fes\u002Fdocs\u002FWeb\u002FAPI\u002FFetch_API). Después de todo, solo necesitas hacer una petición HTTP POST al endpoint de GraphQL. Esta solo necesita contener una query\u002Fmutación en el `body` como una cadena de texto; opcionalmente las variables, si son necesarias para la query. No _necesita_ ser una petición POST, y puede tener un tipo MIME `application\u002Fgraphql`, pero una petición POST con un tipo MIME `application\u002Fjson` debería funcionar siempre para mantenerlo sencillo.\n\n```javascript\nfetch(`${API}\u002Fgraphql`, {\n  method: 'post',\n  headers: { 'content-type': 'application\u002Fjson' },\n  body: JSON.stringify({\n    query: `...`,\n    variables: {\n      ...\n    },\n  })\n}).then(r =\u003E r.json())\n```\n\nPuedes transformar esto en una función más reutilizable así:\n\n```javascript\nasync function gqlFetcher(query, variables) {\n  const { data, errors } = await fetch(`${API}\u002Fgraphql`, {\n    method: 'post',\n    headers: { 'content-type': 'application\u002Fjson' },\n    body: JSON.stringify({ query, variables }),\n  }).then(r =\u003E r.json())\n  if (errors) throw errors\n  return data\n}\n```\n\nUn servidor GraphQL responde con 200 aunque contenga errores. Generalmente solo debes revisar si la respuesta contiene una propiedad `errors`. Esta sigue siendo una manera optimista de manejar la petición, ya que no se está tomando en cuenta otros tipos de errores que sí pueden retornar 4xx o 5xx. Para el objetivo de esta publicación lo dejaremos así.\n\n## Mejor ergonomía\n\nEste método hace que pierdas la cómoda interfaz que Apollo y urql proveen. Siempre puedes crear tus propios hooks que provean una interfaz más amigable, sin embargo, he preferido usar el hook [swr](https:\u002F\u002Fgithub.com\u002Fvercel\u002Fswr) de Vercel. Este hook funciona para cualquier petición de datos remotos. Su funcionamiento consiste en retornar primero la data del cache, luego hace la petición, y finalmente retorna la nueva información recibida. Provee una interfaz amigable para manejar la información dentro de tus componentes mientras mantienen tu UI, como ellos mismos lo describen, rápido y reactivo. La función `gqlFetcher` que hicimos antes ya es compatible con el hook `useSWR`, no se requiere trabajo adicional para hacerlo funcionar.\n\n```javascript\nimport useSWR from 'swr'\n\nconst gqlQuery = `...`\n\nfunction Component() {\n  \u002F\u002F gqlFetcher es la misma función que se definió antes\n  const { data, error } = useSWR(gqlQuery, gqlFetcher)\n\n  if (error) return \u003Cdiv\u003E{\u002F*...*\u002F}\u003C\u002Fdiv\u003E \u002F\u002F JSX con la info del error\n  if (!data) return \u003Cdiv\u003ELoading...\u003C\u002Fdiv\u003E \u002F\u002F Componente de \"Loading\"\n  return \u003Cdiv\u003E{\u002F*...*\u002F}\u003C\u002Fdiv\u003E \u002F\u002F JSX con la info recibida\n}\n```\n\nPara pasar múltiples argumentos a la función `fetcher`, `useSWR` permite pasar un arreglo como primer argumento.\n\n```javascript\nconst gqlQuery = `...`\nconst gqlVariables = {\n  \u002F\u002F ...\n}\n\nfunction Component() {\n  const { data, error } = useSWR([gqlQuery, gqlVariables], gqlFetcher)\n  \u002F\u002F ...\n}\n```\n\n\u003E `useSWR` utiliza el primer argumento como una `llave` que sirve para identificar la petición. Si es un arreglo, `swr` compara superficialmente cada elemento y, si alguno de ellos ha cambiado, revalida la petición.\n\n## Herramientas existentes\n\nSi no quieres crear tu propio wrapper sobre `fetch`, puedes usar [graphql-request](https:\u002F\u002Fgithub.com\u002Fprisma-labs\u002Fgraphql-request). Es un wrapper sobre el API `fetch` para realizar peticiones a un servidor GraphQL que no requiere de mucho trabajo para empezar a utilizarlo. Ya tiene un buen manejo de errores y es isomórfica por defecto (algo que tal vez no le guste a algunas personas). La página de GitHub de `swr` ya muestra un ejemplo con esta herramienta.\n\n```javascript\nimport { request } from 'graphql-request'\n\nconst API = 'https:\u002F\u002Fapi.graph.cool\u002Fsimple\u002Fv1\u002Fmovies'\nconst fetcher = query =\u003E request(API, query)\n\nfunction App () {\n  const { data, error } = useSWR(\n    `{\n      Movie(title: \"Inception\") {\n        releaseDate\n        actors {\n          name\n        }\n      }\n    }`,\n    fetcher\n  )\n  \u002F\u002F ...\n}\n```\n\n## Conclusión\n\nSiento que hay un punto de entrada artificialmente alto para desarrolladores front-end que quieren entrar al mundo de GraphQL. El hecho de que Apollo y urql sean mostrados como opciones para _principiantes_ puede hacer sentir que estas herramientas son _necesarias_ para trabajar con un API GraphQL. Esto no es cierto. **Sí** puedes construir una aplicación completa utilizando solamente `fetch`, tal vez agregando otras pequeñas librerías para utilidades extras. No puedo imaginar algún proyecto hobby que pueda necesitar todas las utilidades proveídas por estas grandes librerías. Clarificando: no estoy diciendo que no debas usar estas librerías si quieres, sino que no debes sentir que estás librerías son _necesarias_ para construir lo que quieres.\n",bodyBegin:13,frontmatter:"title: En realidad no necesitas Apollo\ndescription: ¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo\nbanner: img\u002Fblog-pics\u002F2020-06-08.jpg\nbannertitle: Breslavia, Polonia\ntags:\n  - javascript\n  - graphql\n  - react\n  - programacion",path:"\u002FUsers\u002FPabloABC\u002FDocuments\u002FPersonal\u002FJavaScript\u002FSvelte\u002Fpablo.berganza.dev\u002Fsrc\u002Fmarkdown\u002Fblog\u002F2020-06-08-you-dont-need-apollo\u002Findex.es.md",html:"\u003Cp\u003ELa primera vez que probé \u003Ca\n            href=\"https:\u002F\u002Fgraphql.org\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"GraphQL\"\n          \u003E\n            GraphQL\n          \u003C\u002Fa\u003E fue cuando todavía me hubiera considerado solamente un desarrollador back-end. Hace aproximadamente dos años me di la oportunidad de aprenderlo gracias al soporte de \u003Ca\n            href=\"https:\u002F\u002Fnestjs.com\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"NestJS\"\n          \u003E\n            NestJS\n          \u003C\u002Fa\u003E y me enamoré completamente de él. El hecho de que la documentación se genere automáticamente, y que puedes pedir exactamente la información que necesites con una sola petición, me hizo sentir que trabajar con un API GraphQL como un desarrollador front-end sería muy placentero.\u003C\u002Fp\u003E\n\u003Ch2 id=\"el-camino-hacia-graphql-en-el-front-end\"\u003EEl camino hacia GraphQL en el front-end\u003C\u002Fh2\u003E\n\u003Cp\u003EMe había motivado para crear algo del lado del front-end con este nuevo conocimiento. Para ese entonces, todavía estaba acostumbrándome al desarrollo en front-end con \u003Ca\n            href=\"https:\u002F\u002Freactjs.org\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"React\"\n          \u003E\n            React\n          \u003C\u002Fa\u003E (la última vez que había hecho algo en front-end, jQuery seguía siendo la herramienta a utilizar). Naturalmente, busqué \u003Ccode\u003Egraphql react\u003C\u002Fcode\u003E en DuckDuckGo y lo primero que encontré fue \u003Ca\n            href=\"https:\u002F\u002Fwww.apollographql.com\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"Apollo\"\n          \u003E\n            Apollo\n          \u003C\u002Fa\u003E. Apollo es una herramienta increíble que ofrece muchas utilidades; incluso puedes manejar el estado de tu aplicación con ella. Pero, esta herramienta si se sentía algo \u003Cem\u003Epesada\u003C\u002Fem\u003E para alguien que solo está intentando aprender como usar GraphQL, o para cualquier proyecto pequeño en ese sentido. Admito que fui algo ingenuo, pero en ese momento si pensé: \u003Cem\u003Ewow, GraphQL solamente sería útil para proyectos muy grandes\u003C\u002Fem\u003E. Aun así continué realizando mis experimentos con Apollo. Como era de esperar, pasé gran parte del tiempo leyendo como usar Apollo; algo que no es malo en sí, pero si se sentiría abrumador para alguien aprendiendo.\u003C\u002Fp\u003E\n\u003Cp\u003EEn algún momento el año pasado encontré \u003Ca\n            href=\"https:\u002F\u002Fformidable.com\u002Fopen-source\u002Furql\u002F\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"urql\"\n          \u003E\n            urql\n          \u003C\u002Fa\u003E, que busca ser una alternativa más liviana a Apollo, y fue increíble. Un API más simple, y menos utilidades, significaba que requería menos tiempo leyendo la documentación y más tiempo construyendo lo que necesitaba. Pero siempre se sentía algo pesado para mis casos de uso. Aun así, en estos momentos escogería urql sobre Apollo para un proyecto serio, ya que si siento que Apollo intenta hacer demasiado para mi gusto.\u003C\u002Fp\u003E\n\u003Cp\u003EActualmente no he trabajado profesionalmente en ningún proyecto que utilice GraphQL, pero he seguido utilizándolo para mis proyectos personales. Sin embargo, durante ese tiempo no podía evitar seguir sintiendo que el punto de entrada era algo alto para cualquier desarrollador front-end que quisiera aprenderlo. Si buscas en DuckDuckGo (o Google) \u003Ccode\u003Ereact graphql\u003C\u002Fcode\u003E, tus primeros resultados serán Apollo y \u003Ca\n            href=\"https:\u002F\u002Fwww.howtographql.com\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"howtographql.com\"\n          \u003E\n            howtographql.com\n          \u003C\u002Fa\u003E. Si ingresas a este último, verás que Apollo y urql son listados como la \u003Cem\u003Eopción para principiantes\u003C\u002Fem\u003E. Siento que esto es un punto de entrada artificialmente alto para un principiante.\u003C\u002Fp\u003E\n\u003Ch2 id=\"¿cuál-es-la-alternativa\"\u003E¿Cuál es la alternativa?\u003C\u002Fh2\u003E\n\u003Cp\u003E¿Cuáles son los requisitos mínimos para hacer una petición a un API GraphQL desde el navegador? Pues... solamente el API \u003Ca\n            href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fes\u002Fdocs\u002FWeb\u002FAPI\u002FFetch_API\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"fetch\"\n          \u003E\n            fetch\n          \u003C\u002Fa\u003E. Después de todo, solo necesitas hacer una petición HTTP POST al endpoint de GraphQL. Esta solo necesita contener una query\u002Fmutación en el \u003Ccode\u003Ebody\u003C\u002Fcode\u003E como una cadena de texto; opcionalmente las variables, si son necesarias para la query. No \u003Cem\u003Enecesita\u003C\u002Fem\u003E ser una petición POST, y puede tener un tipo MIME \u003Ccode\u003Eapplication\u002Fgraphql\u003C\u002Fcode\u003E, pero una petición POST con un tipo MIME \u003Ccode\u003Eapplication\u002Fjson\u003C\u002Fcode\u003E debería funcionar siempre para mantenerlo sencillo.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003Efetch(\u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${API}\u003C\u002Fspan\u003E\u002Fgraphql`\u003C\u002Fspan\u003E, {\n  \u003Cspan class=\"hljs-attr\"\u003Emethod\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'post'\u003C\u002Fspan\u003E,\n  \u003Cspan class=\"hljs-attr\"\u003Eheaders\u003C\u002Fspan\u003E: { \u003Cspan class=\"hljs-string\"\u003E'content-type'\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'application\u002Fjson'\u003C\u002Fspan\u003E },\n  \u003Cspan class=\"hljs-attr\"\u003Ebody\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify({\n    \u003Cspan class=\"hljs-attr\"\u003Equery\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`...`\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-attr\"\u003Evariables\u003C\u002Fspan\u003E: {\n      ...\n    },\n  })\n}).then(\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Er\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E r.json())\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EPuedes transformar esto en una función más reutilizable así:\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EgqlFetcher\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Equery, variables\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, errors } = \u003Cspan class=\"hljs-keyword\"\u003Eawait\u003C\u002Fspan\u003E fetch(\u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${API}\u003C\u002Fspan\u003E\u002Fgraphql`\u003C\u002Fspan\u003E, {\n    \u003Cspan class=\"hljs-attr\"\u003Emethod\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'post'\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-attr\"\u003Eheaders\u003C\u002Fspan\u003E: { \u003Cspan class=\"hljs-string\"\u003E'content-type'\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'application\u002Fjson'\u003C\u002Fspan\u003E },\n    \u003Cspan class=\"hljs-attr\"\u003Ebody\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify({ query, variables }),\n  }).then(\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Er\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E r.json())\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (errors) \u003Cspan class=\"hljs-keyword\"\u003Ethrow\u003C\u002Fspan\u003E errors\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E data\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EUn servidor GraphQL responde con 200 aunque contenga errores. Generalmente solo debes revisar si la respuesta contiene una propiedad \u003Ccode\u003Eerrors\u003C\u002Fcode\u003E. Esta sigue siendo una manera optimista de manejar la petición, ya que no se está tomando en cuenta otros tipos de errores que sí pueden retornar 4xx o 5xx. Para el objetivo de esta publicación lo dejaremos así.\u003C\u002Fp\u003E\n\u003Ch2 id=\"mejor-ergonomía\"\u003EMejor ergonomía\u003C\u002Fh2\u003E\n\u003Cp\u003EEste método hace que pierdas la cómoda interfaz que Apollo y urql proveen. Siempre puedes crear tus propios hooks que provean una interfaz más amigable, sin embargo, he preferido usar el hook \u003Ca\n            href=\"https:\u002F\u002Fgithub.com\u002Fvercel\u002Fswr\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"swr\"\n          \u003E\n            swr\n          \u003C\u002Fa\u003E de Vercel. Este hook funciona para cualquier petición de datos remotos. Su funcionamiento consiste en retornar primero la data del cache, luego hace la petición, y finalmente retorna la nueva información recibida. Provee una interfaz amigable para manejar la información dentro de tus componentes mientras mantienen tu UI, como ellos mismos lo describen, rápido y reactivo. La función \u003Ccode\u003EgqlFetcher\u003C\u002Fcode\u003E que hicimos antes ya es compatible con el hook \u003Ccode\u003EuseSWR\u003C\u002Fcode\u003E, no se requiere trabajo adicional para hacerlo funcionar.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E useSWR \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'swr'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E gqlQuery = \u003Cspan class=\"hljs-string\"\u003E`...`\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EComponent\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F gqlFetcher es la misma función que se definió antes\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, error } = useSWR(gqlQuery, gqlFetcher)\n\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (error) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{\u002F*...*\u002F}\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F JSX con la info del error\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (!data) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003ELoading...\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Componente de \"Loading\"\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{\u002F*...*\u002F}\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F JSX con la info recibida\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EPara pasar múltiples argumentos a la función \u003Ccode\u003Efetcher\u003C\u002Fcode\u003E, \u003Ccode\u003EuseSWR\u003C\u002Fcode\u003E permite pasar un arreglo como primer argumento.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E gqlQuery = \u003Cspan class=\"hljs-string\"\u003E`...`\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E gqlVariables = {\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EComponent\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, error } = useSWR([gqlQuery, gqlVariables], gqlFetcher)\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cblockquote\u003E\n\u003Cp\u003E\u003Ccode\u003EuseSWR\u003C\u002Fcode\u003E utiliza el primer argumento como una \u003Ccode\u003Ellave\u003C\u002Fcode\u003E que sirve para identificar la petición. Si es un arreglo, \u003Ccode\u003Eswr\u003C\u002Fcode\u003E compara superficialmente cada elemento y, si alguno de ellos ha cambiado, revalida la petición.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch2 id=\"herramientas-existentes\"\u003EHerramientas existentes\u003C\u002Fh2\u003E\n\u003Cp\u003ESi no quieres crear tu propio wrapper sobre \u003Ccode\u003Efetch\u003C\u002Fcode\u003E, puedes usar \u003Ca\n            href=\"https:\u002F\u002Fgithub.com\u002Fprisma-labs\u002Fgraphql-request\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"graphql-request\"\n          \u003E\n            graphql-request\n          \u003C\u002Fa\u003E. Es un wrapper sobre el API \u003Ccode\u003Efetch\u003C\u002Fcode\u003E para realizar peticiones a un servidor GraphQL que no requiere de mucho trabajo para empezar a utilizarlo. Ya tiene un buen manejo de errores y es isomórfica por defecto (algo que tal vez no le guste a algunas personas). La página de GitHub de \u003Ccode\u003Eswr\u003C\u002Fcode\u003E ya muestra un ejemplo con esta herramienta.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E { request } \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'graphql-request'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E API = \u003Cspan class=\"hljs-string\"\u003E'https:\u002F\u002Fapi.graph.cool\u002Fsimple\u002Fv1\u002Fmovies'\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E fetcher = \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Equery\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E request(API, query)\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EApp\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, error } = useSWR(\n    \u003Cspan class=\"hljs-string\"\u003E`{\n      Movie(title: \"Inception\") {\n        releaseDate\n        actors {\n          name\n        }\n      }\n    }`\u003C\u002Fspan\u003E,\n    fetcher\n  )\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"conclusión\"\u003EConclusión\u003C\u002Fh2\u003E\n\u003Cp\u003ESiento que hay un punto de entrada artificialmente alto para desarrolladores front-end que quieren entrar al mundo de GraphQL. El hecho de que Apollo y urql sean mostrados como opciones para \u003Cem\u003Eprincipiantes\u003C\u002Fem\u003E puede hacer sentir que estas herramientas son \u003Cem\u003Enecesarias\u003C\u002Fem\u003E para trabajar con un API GraphQL. Esto no es cierto. \u003Cstrong\u003ESí\u003C\u002Fstrong\u003E puedes construir una aplicación completa utilizando solamente \u003Ccode\u003Efetch\u003C\u002Fcode\u003E, tal vez agregando otras pequeñas librerías para utilidades extras. No puedo imaginar algún proyecto hobby que pueda necesitar todas las utilidades proveídas por estas grandes librerías. Clarificando: no estoy diciendo que no debas usar estas librerías si quieres, sino que no debes sentir que estás librerías son \u003Cem\u003Enecesarias\u003C\u002Fem\u003E para construir lo que quieres.\u003C\u002Fp\u003E\n",ttr:6,slug:"you-dont-need-apollo"}}],session:{lang:"es"}};(function(){try{eval("async function x(){}");var main="/client/client.a9a415dd.js"}catch(e){main="/client/legacy/client.8afe815a.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 