<!doctype html> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <link href=apple-icon-57x57.png rel=apple-touch-icon sizes=57x57> <link href=apple-icon-60x60.png rel=apple-touch-icon sizes=60x60> <link href=apple-icon-72x72.png rel=apple-touch-icon sizes=72x72> <link href=apple-icon-76x76.png rel=apple-touch-icon sizes=76x76> <link href=apple-icon-114x114.png rel=apple-touch-icon sizes=114x114> <link href=apple-icon-120x120.png rel=apple-touch-icon sizes=120x120> <link href=apple-icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=apple-icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=apple-icon-180x180.png rel=apple-touch-icon sizes=180x180> <link href=android-icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=favicon-32x32.png rel=icon sizes=32x32 type=image/png> <link href=favicon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=favicon-16x16.png rel=icon sizes=16x16 type=image/png> <link href=manifest.json rel=manifest> <meta content=#E34495 name=msapplication-TileColor> <meta content=ms-icon-144x144.png name=msapplication-TileImage> <meta content=#E34495 name=theme-color> <base href=/ > <link href="https://fonts.googleapis.com/css2?family=Overpass:wght@400;600;700&family=Roboto+Slab:wght@400;600;700&display=swap" rel=stylesheet> <link href=dracula.css rel=stylesheet> <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.ico rel=icon type=image/png> <script src=https://unpkg.com/yt-vid@0.0.5/dist/yt-vid/yt-vid.esm.js type=module></script> <script src=https://unpkg.com/yt-vid@0.0.5/dist/yt-vid/yt-vid.js nomodule=""></script> <link href=client/main.4045968916.css rel=stylesheet><link href=client/client.23cf3209.css rel=stylesheet><link href=client/Blog.9fedf68f.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>You don't really need Apollo | Pablo Berganza</title><meta content="Pablo Berganza" name=author><meta content="Small project? Learning GraphQL? Apollo might be an overkill" name=description><meta content="You don't really need Apollo | Pablo Berganza" itemprop=name><meta content="Small project? Learning GraphQL? Apollo might be an overkill" itemprop=description><meta content=https://pablo.berganza.dev/img/blog-pics/2020-06-08-800.jpg name=twitter:image> <meta content=https://pablo.berganza.dev/img/blog-pics/2020-06-08-800.jpg property=og:image> <meta content=https://pablo.berganza.dev/img/blog-pics/2020-06-08-800.jpg itemprop=image> <meta content=summary_large_image name=twitter:card><meta content="You don't really need Apollo | Pablo Berganza" name=twitter:title><meta content="Small project? Learning GraphQL? Apollo might be an overkill" name=twitter:description><meta content=Pablo_ABC name=twitter:site><meta content=Pablo_ABC name=twitter:creator><meta content="You don't really need Apollo | Pablo Berganza" property=og:title><meta content=https://pablo.berganza.dev/blog/you-dont-need-apollo property=og:url><meta content="Pablo Berganza" property=og:site_name><meta content="Small project? Learning GraphQL? Apollo might be an overkill" property=og:description><meta content=en property=og:locale><meta content=1441268341 property=fb:admins><meta content=2097322913669232 property=fb:app_id><meta content=article property=og:type><meta content="Pablo Berganza" property=article:author> <meta content=2020-06-08 property=article:published_time> <meta name=twitter:label1 value="Reading time"> <meta name=twitter:label2 value=Author> <meta name=twitter:data1 value="7 min"> <meta name=twitter:data2 value="Pablo Berganza"><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <header class=svelte-omxq6j><nav class=svelte-199w0oq><div class="svelte-199w0oq left-nav"><a href=./ class=svelte-199w0oq id=logo><span class=svelte-199w0oq>Pablo</span> <span class=svelte-199w0oq>Berganza</span></a> <div class="svelte-199w0oq nav-items"><a href=blog rel=prefetch class="svelte-199w0oq nav-item" id=blog-nav><span class=svelte-199w0oq>Blog</span> </a><a href=contact class="svelte-199w0oq nav-item" id=contact-nav><span class=svelte-199w0oq>Contact Me</span> </a></div></div> <div class="svelte-199w0oq right-nav"><a href=es/blog/you-dont-need-apollo rel=prefetch>es</a> <a href=https://github.com/pablo-abc rel="noopener noreferrer" target=_blank title=GitHub aria-label=GitHub class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" fill=currentColor></path></svg> </a> <a href=https://www.instagram.com/berganzapablo/ rel="noopener noreferrer" target=_blank title=Instagram aria-label=Instagram class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z" fill=currentColor></path></svg> </a> <a href=https://www.linkedin.com/in/PabloABC rel="noopener noreferrer" target=_blank title=LinkedIn aria-label=LinkedIn class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" fill=currentColor></path></svg> </a> <a href=https://twitter.com/Pablo_ABC rel="noopener noreferrer" target=_blank title=Twitter aria-label=Twitter class="nav-item sm svelte-ql1677"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" fill=currentColor></path></svg> </a></div> </nav></header> <main class=svelte-omxq6j> <article class=main><header class="svelte-1yyein title"><h1 class=svelte-1yyein><span class=svelte-1yyein>You don't really need Apollo</span></h1> <h4 class="svelte-1yyein description"><span class=svelte-1yyein>Small project? Learning GraphQL? Apollo might be an overkill</span></h4></header> <div><img alt="Wroclaw, Poland" class="banner svelte-tfh79e" src=img/blog-pics/2020-06-08-placeholder.jpg title="Wroclaw, Poland"> <div class="svelte-1yyein ttr-created"><span class="svelte-1yyein ttr"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z" fill=currentColor></path></svg> 7 min </span> <span class="svelte-1yyein created"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z" fill=currentColor></path></svg> 2020-06-08</span></div> <div class="svelte-1yyein tag-links">Tags: <a href=blog/tags/javascript class="svelte-1yyein tag-link">javascript </a><a href=blog/tags/graphql class="svelte-1yyein tag-link">graphql </a><a href=blog/tags/react class="svelte-1yyein tag-link">react </a><a href=blog/tags/programming class="svelte-1yyein tag-link">programming </a></div> <section class="svelte-1yyein content"><p>The first time I tried <a href=https://graphql.org rel="noopener noreferrer" target=_blank title=GraphQL> GraphQL </a> was when I would still have considered myself as just a back-end developer. About two years ago I gave myself the opportunity to learn it thanks to <a href=https://nestjs.com rel="noopener noreferrer" target=_blank title=NestJS> NestJS </a>'s support for it and I totally felt in love with it. The fact that it's basically self-documenting and the fact that you can ask for exactly the data you want with just one request made me feel that working with a GraphQL API as a front-end developer would feel really enjoyable.</p> <h2 id=road-to-front-end-graphql>Road to front-end GraphQL</h2> <p>I wanted to try to make something on the front-end side with this new knowledge, to get a better feel of it. By that time I was still learning the ropes on front-end with <a href=https://reactjs.org rel="noopener noreferrer" target=_blank title=React> React </a> (last time I did front-end, jQuery was the thing to use). So, naturally, I duckduckgo'ed <code>graphql react</code> and the first thing I found was <a href=https://www.apollographql.com rel="noopener noreferrer" target=_blank title=Apollo> Apollo </a>. Apollo is a great tool that offers many features; you can even manage your whole application's state with it. But it did feel a bit <em>heavy</em> for someone who's just trying to learn how to use GraphQL, or for any small project in that sense. I will admit that it was really naive of me to think this, but at that time I really thought: <em>woah, so GraphQL is really only suitable for pretty big apps</em>. Regardless, I kept on doing my experiments with Apollo. As I suspected I spent a lot of my time learning how to use Apollo, which is not bad <em>per se</em>, but of course it would feel daunting for anyone learning.</p> <p>Sometime about last year I found <a href=https://formidable.com/open-source/urql/ rel="noopener noreferrer" target=_blank title=urql> urql </a> which aims to be a lighter alternative to Apollo. I found this really appealing. And it was great. A simpler API and fewer features meant less time spent on the documentation and more time to actually build something with it. But it still felt pretty heavy for my use cases. Although right now I would probably choose urql over Apollo for a serious project, since I do feel Apollo tries to do too much for my taste.</p> <p>Even though I haven't worked professionally with GraphQL yet, I've kept on using it for my personal projects. Still, I kept on feeling that the entry point for any front-end developer learning it was quite high. If you duckduckgo (or google) <code>react graphql</code> your top results will be Apollo and <a href=https://www.howtographql.com rel="noopener noreferrer" target=_blank title=howtographql.com> howtographql.com </a>. If you go to the latter, you'll see that both Apollo and urql are listed as the <em>beginner's choice</em>. This I feel is an artificially high entry point for a beginner.</p> <h2 id=whats-the-alternative>What's the alternative?</h2> <p>What are the minimum requirements for making a request to a GraphQL API from the browser? Well... just the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API rel="noopener noreferrer" target=_blank title=fetch> fetch </a> API. After all, you only need to make an HTTP POST request to the GraphQL endpoint. It only needs to contain a query/mutation in the body as a string and, optionally, the variables if they're needed for the query. It doesn't <em>need</em> to be a POST request, and it can have an <code>application/graphql</code> MIME type; but, to keep things simple, a POST request with an <code>application/json</code> MIME type should always work.</p> <pre class="hljs javascript"><code>fetch(<span class=hljs-string>`<span class=hljs-subst>${API}</span>/graphql`</span>, {
  <span class=hljs-attr>method</span>: <span class=hljs-string>'post'</span>,
  <span class=hljs-attr>headers</span>: { <span class=hljs-string>'content-type'</span>: <span class=hljs-string>'application/json'</span> },
  <span class=hljs-attr>body</span>: <span class=hljs-built_in>JSON</span>.stringify({
    <span class=hljs-attr>query</span>: <span class=hljs-string>`...`</span>,
    <span class=hljs-attr>variables</span>: {
      ...
    },
  })
}).then(<span class=hljs-function><span class=hljs-params>r</span> =></span> r.json())</code></pre><p>You can turn this into a more reusable function with something like this:</p> <pre class="hljs javascript"><code><span class=hljs-keyword>async</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>gqlFetcher</span>(<span class=hljs-params>query, variables</span>) </span>{
  <span class=hljs-keyword>const</span> { data, errors } = <span class=hljs-keyword>await</span> fetch(<span class=hljs-string>`<span class=hljs-subst>${API}</span>/graphql`</span>, {
    <span class=hljs-attr>method</span>: <span class=hljs-string>'post'</span>,
    <span class=hljs-attr>headers</span>: { <span class=hljs-string>'content-type'</span>: <span class=hljs-string>'application/json'</span> },
    <span class=hljs-attr>body</span>: <span class=hljs-built_in>JSON</span>.stringify({ query, variables }),
  }).then(<span class=hljs-function><span class=hljs-params>r</span> =></span> r.json())
  <span class=hljs-keyword>if</span> (errors) <span class=hljs-keyword>throw</span> errors
  <span class=hljs-keyword>return</span> data
}</code></pre><p>A GraphQL server returns a 200 response even if it contains errors, so you generally only need to check if the response contains an <code>errors</code> property. This is still an optimistic way of handling it, since you're not accounting for other kinds of errors such as network errors that can return 4xx or 5xx responses. For the purposes of this post we'll leave it like this.</p> <h2 id=some-nicer-ergonomics>Some nicer ergonomics</h2> <p>This approach does make you lose the nice interface that Apollo and urql provide you. You can, of course, create your own hooks that provide a friendlier interface; however, I prefer to use Vercel's <a href=https://github.com/vercel/swr rel="noopener noreferrer" target=_blank title=swr> swr </a> hook. This hook works for any kind of remote data fetching; it works by first returning data from the cache, then sending the fetch request, and finally returning the newly received data. It provides a nice interface for handling your data inside your component while keeping your UI, as they describe it, fast and reactive. The <code>gqlFetcher</code> function we made earlier is already compatible with the <code>useSWR</code> hook, so no additional work is required.</p> <pre class="hljs javascript"><code><span class=hljs-keyword>import</span> useSWR <span class=hljs-keyword>from</span> <span class=hljs-string>'swr'</span>

<span class=hljs-keyword>const</span> gqlQuery = <span class=hljs-string>`...`</span>

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>Component</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-comment>// gqlFetcher is the same function we defined earlier</span>
  <span class=hljs-keyword>const</span> { data, error } = useSWR(gqlQuery, gqlFetcher)

  <span class=hljs-keyword>if</span> (error) <span class=hljs-keyword>return</span> <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>{/*...*/}<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span></span> <span class=hljs-comment>// JSX with error data</span>
  <span class=hljs-keyword>if</span> (!data) <span class=hljs-keyword>return</span> <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>Loading...<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span></span> <span class=hljs-comment>// Loading component</span>
  <span class=hljs-keyword>return</span> <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>{/*...*/}<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span></span> <span class=hljs-comment>// JSX with returned data</span>
}</code></pre><p>In order to pass multiple arguments to the <code>fetcher</code> function, the swr hook allows you to pass an array as the first argument.</p> <pre class="hljs javascript"><code><span class=hljs-keyword>const</span> gqlQuery = <span class=hljs-string>`...`</span>
<span class=hljs-keyword>const</span> gqlVariables = {
  <span class=hljs-comment>// ...</span>
}

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>Component</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> { data, error } = useSWR([gqlQuery, gqlVariables], gqlFetcher)
  <span class=hljs-comment>// ...</span>
}</code></pre><blockquote> <p><code>useSWR</code> uses the first argument as a <code>key</code> that serves to uniquely identify the request. If an array is passed, <code>swr</code> shallowly compares each element and, if any of them has changed, it revalidates the request.</p> </blockquote> <h2 id=existing-tooling>Existing tooling</h2> <p>If you don't feel like creating your own wrapper over <code>fetch</code>, you can use <a href=https://github.com/prisma-labs/graphql-request rel="noopener noreferrer" target=_blank title=graphql-request> graphql-request </a>. This is also a wrapper over the <code>fetch</code> API for making GraphQL requests that doesn't need much work to start using it. It already handles errors nicely and is isomorphic by default (which some people might not like). The <code>swr</code> GitHub page already provides an example using this.</p> <pre class="hljs javascript"><code><span class=hljs-keyword>import</span> { request } <span class=hljs-keyword>from</span> <span class=hljs-string>'graphql-request'</span>

<span class=hljs-keyword>const</span> API = <span class=hljs-string>'https://api.graph.cool/simple/v1/movies'</span>
<span class=hljs-keyword>const</span> fetcher = <span class=hljs-function><span class=hljs-params>query</span> =></span> request(API, query)

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>App</span> (<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> { data, error } = useSWR(
    <span class=hljs-string>`{
      Movie(title: "Inception") {
        releaseDate
        actors {
          name
        }
      }
    }`</span>,
    fetcher
  )
  <span class=hljs-comment>// ...</span>
}</code></pre><h2 id=conclusion>Conclusion</h2> <p>It feels there's an artificially high entry level for front-end developers who want to get into the GraphQL world. The fact that Apollo and urql are shown as <em>beginner</em> choices for learning GraphQL can make developers feel like these kinds of tools are actually <em>required</em> to work with a GraphQL API. This is, in fact, not the case; you <strong>can</strong> build a fully capable web application with just the <code>fetch</code> API and some other small libraries for extra features. I can't think of any small project that would actually require all the features that these big libraries have to offer. To clarify: I'm not saying you shouldn't use these tools if you want to; I'm saying you don't need to feel they're <em>required</em> to build what you want.</p> </section> <footer class=svelte-1yyein><ul class="svelte-12fd6e6 share-buttons"><li class=svelte-12fd6e6>Share this:</li> <li class=svelte-12fd6e6><a href="https://www.facebook.com/sharer/sharer.php?u=https://pablo.berganza.dev/you-dont-need-apollo&quote=Small project? Learning GraphQL? Apollo might be an overkill" rel="noopener noreferrer" target=_blank title="Share on Facebook"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Share on Facebook</span> </a></li> <li class=svelte-12fd6e6><a href="https://twitter.com/intent/tweet?source=https://pablo.berganza.dev/you-dont-need-apollo&text=Small project? Learning GraphQL? Apollo might be an overkill:%20https://pablo.berganza.dev/you-dont-need-apollo&via=Pablo_ABC" rel="noopener noreferrer" target=_blank title=Tweet><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Tweet</span> </a></li> <li class=svelte-12fd6e6><a href="https://getpocket.com/save?url=https://pablo.berganza.dev/you-dont-need-apollo&title=You don't really need Apollo" rel="noopener noreferrer" target=_blank title="Add to Pocket"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Add to Pocket</span> </a></li> <li class=svelte-12fd6e6><a href="http://www.reddit.com/submit?url=https://pablo.berganza.dev/you-dont-need-apollo&title=You don't really need Apollo" rel="noopener noreferrer" target=_blank title="Submit to Reddit"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M283.2 345.5c2.7 2.7 2.7 6.8 0 9.2-24.5 24.5-93.8 24.6-118.4 0-2.7-2.4-2.7-6.5 0-9.2 2.4-2.4 6.5-2.4 8.9 0 18.7 19.2 81 19.6 100.5 0 2.4-2.3 6.6-2.3 9 0zm-91.3-53.8c0-14.9-11.9-26.8-26.5-26.8-14.9 0-26.8 11.9-26.8 26.8 0 14.6 11.9 26.5 26.8 26.5 14.6 0 26.5-11.9 26.5-26.5zm90.7-26.8c-14.6 0-26.5 11.9-26.5 26.8 0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-11.9 26.8-26.5 0-14.9-11.9-26.8-26.8-26.8zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-99.7 140.6c-10.1 0-19 4.2-25.6 10.7-24.1-16.7-56.5-27.4-92.5-28.6l18.7-84.2 59.5 13.4c0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-12.2 26.8-26.8 0-14.6-11.9-26.8-26.8-26.8-10.4 0-19.3 6.2-23.8 14.9l-65.7-14.6c-3.3-.9-6.5 1.5-7.4 4.8l-20.5 92.8c-35.7 1.5-67.8 12.2-91.9 28.9-6.5-6.8-15.8-11-25.9-11-37.5 0-49.8 50.4-15.5 67.5-1.2 5.4-1.8 11-1.8 16.7 0 56.5 63.7 102.3 141.9 102.3 78.5 0 142.2-45.8 142.2-102.3 0-5.7-.6-11.6-2.1-17 33.6-17.2 21.2-67.2-16.1-67.2z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Submit to Reddit</span> </a></li> <li class=svelte-12fd6e6><a href="http://www.linkedin.com/shareArticle?mini=true&url=https://pablo.berganza.dev/you-dont-need-apollo&title=You don't really need Apollo&summary=Small project? Learning GraphQL? Apollo might be an overkill&source=https://pablo.berganza.dev/you-dont-need-apollo" rel="noopener noreferrer" target=_blank title="Share on LinkedIn"><svg aria-hidden=true class="fa-svelte svelte-1sz97pc" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" fill=currentColor></path></svg> <span class="sr-only svelte-nn0nch">Share on LinkedIn</span> </a></li> </ul> <label class="svelte-d1ahnf visuallyhidden" for=commento-textarea-root>Comment</label> <div class=svelte-d1ahnf id=commento></div> </footer></div> </article> </main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{blog:{attributes:{title:"You don't really need Apollo",description:"Small project? Learning GraphQL? Apollo might be an overkill",banner:"img\u002Fblog-pics\u002F2020-06-08.jpg",bannertitle:"Wroclaw, Poland",tags:["javascript","graphql","react","programming"],created:"2020-06-08"},body:"The first time I tried [GraphQL](https:\u002F\u002Fgraphql.org) was when I would still have considered myself as just a back-end developer. About two years ago I gave myself the opportunity to learn it thanks to [NestJS](https:\u002F\u002Fnestjs.com)'s support for it and I totally felt in love with it. The fact that it's basically self-documenting and the fact that you can ask for exactly the data you want with just one request made me feel that working with a GraphQL API as a front-end developer would feel really enjoyable.\n\n## Road to front-end GraphQL\n\nI wanted to try to make something on the front-end side with this new knowledge, to get a better feel of it. By that time I was still learning the ropes on front-end with [React](https:\u002F\u002Freactjs.org) (last time I did front-end, jQuery was the thing to use). So, naturally, I duckduckgo'ed `graphql react` and the first thing I found was [Apollo](https:\u002F\u002Fwww.apollographql.com). Apollo is a great tool that offers many features; you can even manage your whole application's state with it. But it did feel a bit _heavy_ for someone who's just trying to learn how to use GraphQL, or for any small project in that sense. I will admit that it was really naive of me to think this, but at that time I really thought: _woah, so GraphQL is really only suitable for pretty big apps_. Regardless, I kept on doing my experiments with Apollo. As I suspected I spent a lot of my time learning how to use Apollo, which is not bad _per se_, but of course it would feel daunting for anyone learning.\n\nSometime about last year I found [urql](https:\u002F\u002Fformidable.com\u002Fopen-source\u002Furql\u002F) which aims to be a lighter alternative to Apollo. I found this really appealing. And it was great. A simpler API and fewer features meant less time spent on the documentation and more time to actually build something with it. But it still felt pretty heavy for my use cases. Although right now I would probably choose urql over Apollo for a serious project, since I do feel Apollo tries to do too much for my taste.\n\nEven though I haven't worked professionally with GraphQL yet, I've kept on using it for my personal projects. Still, I kept on feeling that the entry point for any front-end developer learning it was quite high. If you duckduckgo (or google) `react graphql` your top results will be Apollo and [howtographql.com](https:\u002F\u002Fwww.howtographql.com). If you go to the latter, you'll see that both Apollo and urql are listed as the _beginner's choice_. This I feel is an artificially high entry point for a beginner.\n\n## What's the alternative?\n\nWhat are the minimum requirements for making a request to a GraphQL API from the browser? Well... just the [fetch](https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FFetch_API) API. After all, you only need to make an HTTP POST request to the GraphQL endpoint. It only needs to contain a query\u002Fmutation in the body as a string and, optionally, the variables if they're needed for the query. It doesn't _need_ to be a POST request, and it can have an `application\u002Fgraphql` MIME type; but, to keep things simple, a POST request with an `application\u002Fjson` MIME type should always work.\n\n```javascript\nfetch(`${API}\u002Fgraphql`, {\n  method: 'post',\n  headers: { 'content-type': 'application\u002Fjson' },\n  body: JSON.stringify({\n    query: `...`,\n    variables: {\n      ...\n    },\n  })\n}).then(r =\u003E r.json())\n```\n\nYou can turn this into a more reusable function with something like this:\n\n```javascript\nasync function gqlFetcher(query, variables) {\n  const { data, errors } = await fetch(`${API}\u002Fgraphql`, {\n    method: 'post',\n    headers: { 'content-type': 'application\u002Fjson' },\n    body: JSON.stringify({ query, variables }),\n  }).then(r =\u003E r.json())\n  if (errors) throw errors\n  return data\n}\n```\n\nA GraphQL server returns a 200 response even if it contains errors, so you generally only need to check if the response contains an `errors` property. This is still an optimistic way of handling it, since you're not accounting for other kinds of errors such as network errors that can return 4xx or 5xx responses. For the purposes of this post we'll leave it like this.\n\n## Some nicer ergonomics\n\nThis approach does make you lose the nice interface that Apollo and urql provide you. You can, of course, create your own hooks that provide a friendlier interface; however, I prefer to use Vercel's [swr](https:\u002F\u002Fgithub.com\u002Fvercel\u002Fswr) hook. This hook works for any kind of remote data fetching; it works by first returning data from the cache, then sending the fetch request, and finally returning the newly received data. It provides a nice interface for handling your data inside your component while keeping your UI, as they describe it, fast and reactive. The `gqlFetcher` function we made earlier is already compatible with the `useSWR` hook, so no additional work is required.\n\n```javascript\nimport useSWR from 'swr'\n\nconst gqlQuery = `...`\n\nfunction Component() {\n  \u002F\u002F gqlFetcher is the same function we defined earlier\n  const { data, error } = useSWR(gqlQuery, gqlFetcher)\n\n  if (error) return \u003Cdiv\u003E{\u002F*...*\u002F}\u003C\u002Fdiv\u003E \u002F\u002F JSX with error data\n  if (!data) return \u003Cdiv\u003ELoading...\u003C\u002Fdiv\u003E \u002F\u002F Loading component\n  return \u003Cdiv\u003E{\u002F*...*\u002F}\u003C\u002Fdiv\u003E \u002F\u002F JSX with returned data\n}\n```\n\nIn order to pass multiple arguments to the `fetcher` function, the swr hook allows you to pass an array as the first argument.\n\n```javascript\nconst gqlQuery = `...`\nconst gqlVariables = {\n  \u002F\u002F ...\n}\n\nfunction Component() {\n  const { data, error } = useSWR([gqlQuery, gqlVariables], gqlFetcher)\n  \u002F\u002F ...\n}\n```\n\n\u003E `useSWR` uses the first argument as a `key` that serves to uniquely identify the request. If an array is passed, `swr` shallowly compares each element and, if any of them has changed, it revalidates the request.\n\n## Existing tooling\n\nIf you don't feel like creating your own wrapper over `fetch`, you can use [graphql-request](https:\u002F\u002Fgithub.com\u002Fprisma-labs\u002Fgraphql-request). This is also a wrapper over the `fetch` API for making GraphQL requests that doesn't need much work to start using it. It already handles errors nicely and is isomorphic by default (which some people might not like). The `swr` GitHub page already provides an example using this.\n\n```javascript\nimport { request } from 'graphql-request'\n\nconst API = 'https:\u002F\u002Fapi.graph.cool\u002Fsimple\u002Fv1\u002Fmovies'\nconst fetcher = query =\u003E request(API, query)\n\nfunction App () {\n  const { data, error } = useSWR(\n    `{\n      Movie(title: \"Inception\") {\n        releaseDate\n        actors {\n          name\n        }\n      }\n    }`,\n    fetcher\n  )\n  \u002F\u002F ...\n}\n```\n\n## Conclusion\n\nIt feels there's an artificially high entry level for front-end developers who want to get into the GraphQL world. The fact that Apollo and urql are shown as _beginner_ choices for learning GraphQL can make developers feel like these kinds of tools are actually _required_ to work with a GraphQL API. This is, in fact, not the case; you **can** build a fully capable web application with just the `fetch` API and some other small libraries for extra features. I can't think of any small project that would actually require all the features that these big libraries have to offer. To clarify: I'm not saying you shouldn't use these tools if you want to; I'm saying you don't need to feel they're _required_ to build what you want.\n",bodyBegin:13,frontmatter:"title: \"You don't really need Apollo\"\ndescription: Small project? Learning GraphQL? Apollo might be an overkill\nbanner: img\u002Fblog-pics\u002F2020-06-08.jpg\nbannertitle: Wroclaw, Poland\ntags:\n  - javascript\n  - graphql\n  - react\n  - programming",path:"\u002FUsers\u002FPabloABC\u002FDocuments\u002FPersonal\u002FJavaScript\u002FSvelte\u002Fpablo.berganza.dev\u002Fsrc\u002Fmarkdown\u002Fblog\u002F2020-06-08-you-dont-need-apollo\u002Findex.en.md",html:"\u003Cp\u003EThe first time I tried \u003Ca\n            href=\"https:\u002F\u002Fgraphql.org\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"GraphQL\"\n          \u003E\n            GraphQL\n          \u003C\u002Fa\u003E was when I would still have considered myself as just a back-end developer. About two years ago I gave myself the opportunity to learn it thanks to \u003Ca\n            href=\"https:\u002F\u002Fnestjs.com\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"NestJS\"\n          \u003E\n            NestJS\n          \u003C\u002Fa\u003E&#39;s support for it and I totally felt in love with it. The fact that it&#39;s basically self-documenting and the fact that you can ask for exactly the data you want with just one request made me feel that working with a GraphQL API as a front-end developer would feel really enjoyable.\u003C\u002Fp\u003E\n\u003Ch2 id=\"road-to-front-end-graphql\"\u003ERoad to front-end GraphQL\u003C\u002Fh2\u003E\n\u003Cp\u003EI wanted to try to make something on the front-end side with this new knowledge, to get a better feel of it. By that time I was still learning the ropes on front-end with \u003Ca\n            href=\"https:\u002F\u002Freactjs.org\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"React\"\n          \u003E\n            React\n          \u003C\u002Fa\u003E (last time I did front-end, jQuery was the thing to use). So, naturally, I duckduckgo&#39;ed \u003Ccode\u003Egraphql react\u003C\u002Fcode\u003E and the first thing I found was \u003Ca\n            href=\"https:\u002F\u002Fwww.apollographql.com\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"Apollo\"\n          \u003E\n            Apollo\n          \u003C\u002Fa\u003E. Apollo is a great tool that offers many features; you can even manage your whole application&#39;s state with it. But it did feel a bit \u003Cem\u003Eheavy\u003C\u002Fem\u003E for someone who&#39;s just trying to learn how to use GraphQL, or for any small project in that sense. I will admit that it was really naive of me to think this, but at that time I really thought: \u003Cem\u003Ewoah, so GraphQL is really only suitable for pretty big apps\u003C\u002Fem\u003E. Regardless, I kept on doing my experiments with Apollo. As I suspected I spent a lot of my time learning how to use Apollo, which is not bad \u003Cem\u003Eper se\u003C\u002Fem\u003E, but of course it would feel daunting for anyone learning.\u003C\u002Fp\u003E\n\u003Cp\u003ESometime about last year I found \u003Ca\n            href=\"https:\u002F\u002Fformidable.com\u002Fopen-source\u002Furql\u002F\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"urql\"\n          \u003E\n            urql\n          \u003C\u002Fa\u003E which aims to be a lighter alternative to Apollo. I found this really appealing. And it was great. A simpler API and fewer features meant less time spent on the documentation and more time to actually build something with it. But it still felt pretty heavy for my use cases. Although right now I would probably choose urql over Apollo for a serious project, since I do feel Apollo tries to do too much for my taste.\u003C\u002Fp\u003E\n\u003Cp\u003EEven though I haven&#39;t worked professionally with GraphQL yet, I&#39;ve kept on using it for my personal projects. Still, I kept on feeling that the entry point for any front-end developer learning it was quite high. If you duckduckgo (or google) \u003Ccode\u003Ereact graphql\u003C\u002Fcode\u003E your top results will be Apollo and \u003Ca\n            href=\"https:\u002F\u002Fwww.howtographql.com\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"howtographql.com\"\n          \u003E\n            howtographql.com\n          \u003C\u002Fa\u003E. If you go to the latter, you&#39;ll see that both Apollo and urql are listed as the \u003Cem\u003Ebeginner&#39;s choice\u003C\u002Fem\u003E. This I feel is an artificially high entry point for a beginner.\u003C\u002Fp\u003E\n\u003Ch2 id=\"whats-the-alternative\"\u003EWhat&#39;s the alternative?\u003C\u002Fh2\u003E\n\u003Cp\u003EWhat are the minimum requirements for making a request to a GraphQL API from the browser? Well... just the \u003Ca\n            href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FFetch_API\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"fetch\"\n          \u003E\n            fetch\n          \u003C\u002Fa\u003E API. After all, you only need to make an HTTP POST request to the GraphQL endpoint. It only needs to contain a query\u002Fmutation in the body as a string and, optionally, the variables if they&#39;re needed for the query. It doesn&#39;t \u003Cem\u003Eneed\u003C\u002Fem\u003E to be a POST request, and it can have an \u003Ccode\u003Eapplication\u002Fgraphql\u003C\u002Fcode\u003E MIME type; but, to keep things simple, a POST request with an \u003Ccode\u003Eapplication\u002Fjson\u003C\u002Fcode\u003E MIME type should always work.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003Efetch(\u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${API}\u003C\u002Fspan\u003E\u002Fgraphql`\u003C\u002Fspan\u003E, {\n  \u003Cspan class=\"hljs-attr\"\u003Emethod\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'post'\u003C\u002Fspan\u003E,\n  \u003Cspan class=\"hljs-attr\"\u003Eheaders\u003C\u002Fspan\u003E: { \u003Cspan class=\"hljs-string\"\u003E'content-type'\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'application\u002Fjson'\u003C\u002Fspan\u003E },\n  \u003Cspan class=\"hljs-attr\"\u003Ebody\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify({\n    \u003Cspan class=\"hljs-attr\"\u003Equery\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`...`\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-attr\"\u003Evariables\u003C\u002Fspan\u003E: {\n      ...\n    },\n  })\n}).then(\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Er\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E r.json())\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EYou can turn this into a more reusable function with something like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EgqlFetcher\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Equery, variables\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, errors } = \u003Cspan class=\"hljs-keyword\"\u003Eawait\u003C\u002Fspan\u003E fetch(\u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${API}\u003C\u002Fspan\u003E\u002Fgraphql`\u003C\u002Fspan\u003E, {\n    \u003Cspan class=\"hljs-attr\"\u003Emethod\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'post'\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-attr\"\u003Eheaders\u003C\u002Fspan\u003E: { \u003Cspan class=\"hljs-string\"\u003E'content-type'\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'application\u002Fjson'\u003C\u002Fspan\u003E },\n    \u003Cspan class=\"hljs-attr\"\u003Ebody\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify({ query, variables }),\n  }).then(\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Er\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E r.json())\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (errors) \u003Cspan class=\"hljs-keyword\"\u003Ethrow\u003C\u002Fspan\u003E errors\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E data\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EA GraphQL server returns a 200 response even if it contains errors, so you generally only need to check if the response contains an \u003Ccode\u003Eerrors\u003C\u002Fcode\u003E property. This is still an optimistic way of handling it, since you&#39;re not accounting for other kinds of errors such as network errors that can return 4xx or 5xx responses. For the purposes of this post we&#39;ll leave it like this.\u003C\u002Fp\u003E\n\u003Ch2 id=\"some-nicer-ergonomics\"\u003ESome nicer ergonomics\u003C\u002Fh2\u003E\n\u003Cp\u003EThis approach does make you lose the nice interface that Apollo and urql provide you. You can, of course, create your own hooks that provide a friendlier interface; however, I prefer to use Vercel&#39;s \u003Ca\n            href=\"https:\u002F\u002Fgithub.com\u002Fvercel\u002Fswr\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"swr\"\n          \u003E\n            swr\n          \u003C\u002Fa\u003E hook. This hook works for any kind of remote data fetching; it works by first returning data from the cache, then sending the fetch request, and finally returning the newly received data. It provides a nice interface for handling your data inside your component while keeping your UI, as they describe it, fast and reactive. The \u003Ccode\u003EgqlFetcher\u003C\u002Fcode\u003E function we made earlier is already compatible with the \u003Ccode\u003EuseSWR\u003C\u002Fcode\u003E hook, so no additional work is required.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E useSWR \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'swr'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E gqlQuery = \u003Cspan class=\"hljs-string\"\u003E`...`\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EComponent\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F gqlFetcher is the same function we defined earlier\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, error } = useSWR(gqlQuery, gqlFetcher)\n\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (error) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{\u002F*...*\u002F}\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F JSX with error data\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (!data) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003ELoading...\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Loading component\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{\u002F*...*\u002F}\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F JSX with returned data\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EIn order to pass multiple arguments to the \u003Ccode\u003Efetcher\u003C\u002Fcode\u003E function, the swr hook allows you to pass an array as the first argument.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E gqlQuery = \u003Cspan class=\"hljs-string\"\u003E`...`\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E gqlVariables = {\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EComponent\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, error } = useSWR([gqlQuery, gqlVariables], gqlFetcher)\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cblockquote\u003E\n\u003Cp\u003E\u003Ccode\u003EuseSWR\u003C\u002Fcode\u003E uses the first argument as a \u003Ccode\u003Ekey\u003C\u002Fcode\u003E that serves to uniquely identify the request. If an array is passed, \u003Ccode\u003Eswr\u003C\u002Fcode\u003E shallowly compares each element and, if any of them has changed, it revalidates the request.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch2 id=\"existing-tooling\"\u003EExisting tooling\u003C\u002Fh2\u003E\n\u003Cp\u003EIf you don&#39;t feel like creating your own wrapper over \u003Ccode\u003Efetch\u003C\u002Fcode\u003E, you can use \u003Ca\n            href=\"https:\u002F\u002Fgithub.com\u002Fprisma-labs\u002Fgraphql-request\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n            title=\"graphql-request\"\n          \u003E\n            graphql-request\n          \u003C\u002Fa\u003E. This is also a wrapper over the \u003Ccode\u003Efetch\u003C\u002Fcode\u003E API for making GraphQL requests that doesn&#39;t need much work to start using it. It already handles errors nicely and is isomorphic by default (which some people might not like). The \u003Ccode\u003Eswr\u003C\u002Fcode\u003E GitHub page already provides an example using this.\u003C\u002Fp\u003E\n\u003Cpre class=\"javascript hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E { request } \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'graphql-request'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E API = \u003Cspan class=\"hljs-string\"\u003E'https:\u002F\u002Fapi.graph.cool\u002Fsimple\u002Fv1\u002Fmovies'\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E fetcher = \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Equery\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E request(API, query)\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EApp\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, error } = useSWR(\n    \u003Cspan class=\"hljs-string\"\u003E`{\n      Movie(title: \"Inception\") {\n        releaseDate\n        actors {\n          name\n        }\n      }\n    }`\u003C\u002Fspan\u003E,\n    fetcher\n  )\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"conclusion\"\u003EConclusion\u003C\u002Fh2\u003E\n\u003Cp\u003EIt feels there&#39;s an artificially high entry level for front-end developers who want to get into the GraphQL world. The fact that Apollo and urql are shown as \u003Cem\u003Ebeginner\u003C\u002Fem\u003E choices for learning GraphQL can make developers feel like these kinds of tools are actually \u003Cem\u003Erequired\u003C\u002Fem\u003E to work with a GraphQL API. This is, in fact, not the case; you \u003Cstrong\u003Ecan\u003C\u002Fstrong\u003E build a fully capable web application with just the \u003Ccode\u003Efetch\u003C\u002Fcode\u003E API and some other small libraries for extra features. I can&#39;t think of any small project that would actually require all the features that these big libraries have to offer. To clarify: I&#39;m not saying you shouldn&#39;t use these tools if you want to; I&#39;m saying you don&#39;t need to feel they&#39;re \u003Cem\u003Erequired\u003C\u002Fem\u003E to build what you want.\u003C\u002Fp\u003E\n",ttr:7,slug:"you-dont-need-apollo"}}],session:{lang:"en"}};(function(){try{eval("async function x(){}");var main="/client/client.23cf3209.js"}catch(e){main="/client/legacy/client.eb0440b3.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 